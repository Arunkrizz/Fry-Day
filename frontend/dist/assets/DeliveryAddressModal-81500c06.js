import{r as n,R as E,k as O,j as t,D as B,l as N,m as H,n as T,o as Y,p as z,B as a,I as S,f as k,F as J,q as K}from"./index-f5e4b025.js";const V=({submitHandler:D,isOpen:$,onOpen:Q,onClose:h})=>{var M;const[r,x]=n.useState(""),[i,y]=n.useState(""),[l,j]=n.useState(""),[d,v]=n.useState(""),[C,p]=n.useState(""),[b,m]=n.useState(""),[L,q]=n.useState("cod");n.useState(!1);const A=E.useRef(),{userInfo:o}=O(e=>e.auth);n.useEffect(()=>{var e,s,f,F,P,R;x((e=o==null?void 0:o.address)==null?void 0:e.name),y((s=o==null?void 0:o.address)==null?void 0:s.streetName),j((f=o==null?void 0:o.address)==null?void 0:f.locality),v((F=o==null?void 0:o.address)==null?void 0:F.mobile),p((P=o==null?void 0:o.address)==null?void 0:P.latitude),m((R=o==null?void 0:o.address)==null?void 0:R.longitude)},[o,(M=o==null?void 0:o.address)==null?void 0:M.name]);var c={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};const G=()=>{navigator.geolocation?navigator.permissions.query({name:"geolocation"}).then(function(e){console.log(e),e.state==="granted"||e.state==="prompt"?navigator.geolocation.getCurrentPosition(u,g,c):e.state}):console.log("Geolocation is not supported by this browser.")},w=()=>{try{const e=new FormData;e.append("name",r),e.append("address",i),e.append("locality",l),e.append("mobile",d),e.append("latitude",C),e.append("longitude",b),e.append("paymentMethod",L),D(e)}catch(e){console.log(e)}};var c={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function u(e){var s=e.coords;console.log("Your current position is:"),console.log(`Latitude : ${s.latitude}`),console.log(`Longitude: ${s.longitude}`),console.log(`More or less ${s.accuracy} meters.`),p(s.latitude),m(s.longitude)}function g(e){console.warn(`ERROR(${e.code}): ${e.message}`)}return n.useEffect(()=>{navigator.geolocation?navigator.permissions.query({name:"geolocation"}).then(function(e){e.state==="granted"||e.state==="prompt"?navigator.geolocation.getCurrentPosition(u,g,c):e.state}):console.log("Geolocation is not supported by this browser.")},[]),t.jsx(t.Fragment,{children:t.jsx(t.Fragment,{children:t.jsxs(B,{isOpen:$,placement:"right",onClose:h,finalFocusRef:A,size:"sm",children:[t.jsx(N,{}),t.jsxs(H,{children:[t.jsx(T,{}),t.jsx(Y,{children:"Set Delivery Address"}),t.jsxs(z,{children:[t.jsxs(a,{children:[t.jsxs(a.Group,{controlId:"firstName",children:[t.jsx(a.Label,{children:"First Name"}),t.jsx(a.Control,{type:"text",value:r,onChange:e=>x(e.target.value),isInvalid:(r==null?void 0:r.trim())==="",required:!0}),t.jsx(a.Control.Feedback,{type:"invalid",children:"Please enter your name."})]}),t.jsxs(a.Group,{controlId:"address",children:[t.jsx(a.Label,{children:"Street name"}),t.jsx(a.Control,{type:"text",value:i,onChange:e=>y(e.target.value),isInvalid:(i==null?void 0:i.trim())==="",required:!0}),t.jsx(a.Control.Feedback,{type:"invalid",children:"Please enter your street name."})]}),t.jsxs(a.Group,{controlId:"Locality",children:[t.jsx(a.Label,{children:"Locality"}),t.jsx(a.Control,{type:"text",value:l,onChange:e=>j(e.target.value),isInvalid:(l==null?void 0:l.trim())==="",required:!0}),t.jsx(a.Control.Feedback,{type:"invalid",children:"Please enter your locality."})]}),t.jsxs(a.Group,{controlId:"mobile",children:[t.jsx(a.Label,{children:"Mobile"}),t.jsx(a.Control,{type:"text",value:d,onChange:e=>v(e.target.value),isInvalid:(d==null?void 0:d.trim().length)<10,required:!0}),t.jsx(a.Control.Feedback,{type:"invalid",children:"Please enter your mobile no."})]}),t.jsxs(S,{className:"mb-3",children:[t.jsx(S.Text,{children:"Latitude and Longitude"}),t.jsx(a.Control,{"aria-label":"Latitude",value:C,onChange:e=>p(e.target.value),required:!0}),t.jsx(a.Control,{"aria-label":"Longitude",value:b,onChange:e=>m(e.target.value),required:!0}),t.jsxs(k,{style:{display:"flex",alignItems:"center"},onClick:G,children:[t.jsx(J,{}),"Detect"]})]}),t.jsxs(a.Group,{children:[t.jsx(a.Label,{as:"legend",children:"Payment Method"}),t.jsx(a.Check,{type:"radio",label:"Cash On Delivery (COD)",id:"cod",name:"paymentMethod",checked:L==="cod",onChange:()=>q("cod")})]})]}),t.jsx(k,{style:{marginTop:"40px"},variant:"primary",onClick:()=>{w(),h()},children:"Proceed to checkout"})]}),t.jsx(K,{})]})]})})})};export{V as default};
